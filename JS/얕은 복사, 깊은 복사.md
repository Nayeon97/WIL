## 🚀 얕은 복사, 깊은 복사

---

작성일: 2022년 4월 8일

### 📌 얕은 복사, 깊은 복사.<br />

팀 프로젝트때 사용했던 노션을 정리하다가 발견한 물음표 가득한 제목의 글..<br />

![default](../imgs/copy.png)

아쉽게도 제목만 적혀져있다. 당시 상황이 잘 기억은 나지 않지만, 최신순 정렬 기능을 구현하기 위해 공부하던 중에... 배열이 정렬이 제대로 되지 않아, 찾아보니 원인이 얕은 복사때문! 이라는 것 까지 기억이 난다. 과거의 내가 미뤄둔 글을 오늘의 내가 정리하면 좋을 것 같아서, 주제는 **얕은 복사, 깊은 복사** 로 정했다.

✅ 복사에 대해 살펴보기 전에 원시 값과 참조 값에 대해 알고 있어야 한다.  
  
 1. 원시값
객체가 아니면서 메서드도 가지지 않는 데이터를 뜻한다.  
 기본형 데이터는 값을 그대로 할당한다.
String, Number, Bigint, Boolean, undefined, symbol  
  
 2. 참조값
변수에 할당할때 값이 아닌 데이터의 주소를 저장한다.
Object, Array

✅ 얕은 복사란?  
 얕은 복사에 대해 설명하기 전에 객체 비교를 먼저 알아보자.

```js
let a = { number: 1 }
let b = { number: 2 }

if (a == b) {
  console.log('a==b')
} else {
  console.log('a!=b')
}
// a!=b 가 출력
```

객체는 객체의 주소에 의한 비교를 하기 때문에 (얕은 비교) , a객체와 b객체는 같지 않다고 출력된다. 만약 a==b 의 결과가 출력이 되도록 할려면, 아래처럼 복사를 해야한다.

```js
let a = { number: 1 }
let b = a

if (a == b) {
  console.log('a==b')
} else {
  console.log('a!=b')
}
// a==b 가 출력
```

b 객체는 a 객체의 <u>**메모리 주소를 복사**</u>하기 때문에, 같다고 출력된다.  
 **이것이 얕은 복사이다!** 두 객체는 같은 주소를 참조하고 있기 때문에, 만약 b 객체의 property 를 수정하고, a 객체를 출력하면, 수정된 b 객체의 값과 똑같다.

```js
let a = { number: 1 }
let b = a

b.number = 2

console.log(a)

// [object Object] {
// number: 2
// }
```

그럼 이쯤에서 드는 생각이 있다. 그럼 객체는 복사를 할 수는 있지만, 복사 후에 객체 값을 수정하면, 원본 객체의 값 또한 바뀌어버리니, 쉽게 속성을 바꿀 수는 없겠구나..  
❓ **그럼 메모리 주소를 복사하지 않고, property 값만 복사할 수는 없을까..?**
이 물음에 대한 해답이 깊은 복사다!

✅ 깊은 복사란?  
두 객체 중 한 객체의 프로퍼티를 수정해도 다른 객체의 값은 그대로! 어떻게 가능할까..?  
깊은 복사는 얕은 복사와 달리 객체의 실제 속성 값을 복사한다.

     💡 얕은 복사와 깊은 복사를 하는 방법은 여러가지가 있는데, 정리가 잘 되어 있는 블로그들이 많아서 따로 정리를 하지는 않을 예정이다.

---

https://hanamon.kr/javascript-shallow-copy-deep-copy/
https://bbangson.tistory.com/78
https://velog.io/@th0566/Javascript-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC-%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC
